{% extends "base.html" %}
{% block content %}
<div class="container py-5">
  <h2 class="text-center mb-5 fw-bold">ðŸ›’ Your Shopping Cart</h2>

  {% for item in cart_items %}
  <div class="card mb-4 border-0 shadow-sm rounded-4">
    <div class="row g-0 align-items-center">
      <div class="col-md-3 text-center p-3">
        <img src="{{ url_for('static', filename='images/' ~ item.product_image) }}"
             class="img-thumbnail rounded-3 shadow-sm"
             style="max-height: 150px; object-fit: cover;"
             alt="{{ item.product_name }}">
      </div>
      <div class="col-md-6">
        <div class="card-body">
          <h5 class="card-title text-primary fw-semibold">{{ item.product_name }}</h5>
          <p class="card-text text-muted small">{{ item.product_description }}</p>
          <p class="card-text mb-2">
            <span class="badge bg-success">${{ item.product_price }}</span>
            <span class="ms-2 text-secondary">x {{ item.quantity }}</span>
          </p>
          <p class="card-text fw-bold text-dark">Subtotal: ${{ item.quantity * item.product_price }}</p>
        </div>
      </div>
      <div class="col-md-3 text-end pe-4">
        <form action="{{ url_for('update_cart', cart_id=item.id) }}" method="POST" class="mb-2">
          <div class="input-group input-group-sm">
            <input type="number" name="quantity" value="{{ item.quantity }}" min="1" class="form-control">
            <button type="submit" class="btn btn-outline-success">Update</button>
          </div>
        </form>
        <a href="{{ url_for('remove_from_cart', cart_id=item.id) }}" class="btn btn-outline-danger btn-sm">Remove</a>
      </div>
    </div>
  </div>
  {% endfor %}

  <div class="text-end mt-5">
    <h4 class="fw-bold">Total: ${{ total_price }}</h4>
    <a href="{{ url_for('checkout') }}" class="btn btn-primary btn-lg mt-3">
      <i class="fas fa-credit-card me-2"></i> Proceed to Checkout
    </a>
  </div>
</div>
{% endblock %}
